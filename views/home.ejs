<!DOCTYPE html>
<html lang="en">


<head>
    <%- include ('./partials/head.ejs') %>
</head>
<body>
    <a class="titleText">
    <h1>Music List</h1>
    <h3>Artist and Concert tracker for the avid music fan!</h3> </a>
    
    <div class = "holdAll">
    <div id="artist" class="flex-container">
        <!-- Artist List-->
           <h2> Artists:</h2>
           <a href ="/artist/new"> 
         <button type = "submit"> Add A New Artist </button>
            </a>
        <ul class="homeList">
            <% for (let artist of artists) { %>
                <div class = "landmark">
                 <a class ="objects" href="/artist/<%=artist._id %>">
                    <li class="db-object">
                        <div id = displayImage>
                            
                        <p> <% if (artist.image) {%>
                            <img class= "image" src= <%= artist.image %> width="100" />
                                <% } else { %>
                       <img class="image" src="/noimage.jpeg" width="100"> <% } %> </p></div>

                       <div class = textBox>
                    
                        
                        Name: <%= artist.name %> 
                        <br />
                        Genre: <%= artist.genre %>
                        <br />
                        Last Edited On: <%= artist.dateLogged %>
                     </div>
                    </li>
                    </a>   
                    <div class="iconHold">
                            <form action="/artist/edit/<%= artist._id %>" method ="get"> 
                            <button type = "submit"> <img src="/edit.svg" width="20px" height="30px"></button></form>
                            
                            <button id="deleteArtistModal" onclick="this.closest('.landmark').querySelector('.modal').style.display='inherit'"><img src ="/delete.svg" width="20px" height="30px"><br/></button> 
                        </div>

                    <!-- The Modal -->
                            <div id="myModal" class="modal">
                              <!-- Modal content -->
                                <div class="modal-content">
                                <span class="close" onclick="this.closest('.landmark').querySelector('.modal').style.display=''">&times;</span>
                                <p>Are you sure you want to delete <%= artist.name %>?</p>
                                <div><form style = "display: inline;" action="/artist/<%= artist._id %>?_method=DELETE" method ="post"> <input type="hidden" name="_method" value="DELETE"> 
                                    
                            <button type="submit">Yes</button> </form>
                        <button onclick="this.closest('.landmark').querySelector('.modal').style.display=''">No</button></div>
                                </div></div> 
</div>
                    <% } %>

                    
        </ul>
        </div>




<div id="concert" class="flex-container">
    <!-- Concert List-->
    <h2> Concerts:</h2>
    <a href ="/concert/new"> 
         <button type = "submit"> Add A New Concert</button>
            </a>
        <ul class="homeList">
            <% for (let concert of concerts) { %>
                <div class="landmark">
                <a class ="objects" href="/concert/<%=concert._id %>">
                    <li class="db-object">
                        <div class="displayImage">
                        <p> <% if (concert.image) {%>
                            <img class= "image" src= <%= concert.image %> width="100" />
                                <% } else { %>
                       <img class="image" src="/noimage.jpeg" width="100"> <% } %> </p></div>

                        <div class = textBox>
                        
                        Name: <%= concert.name %> 
                        <br />
                        Genre: <%= concert.genre %>
                        <br />
                        Tour: <%= concert.tourName %>
                        <br />
                        Concert Date: <%= concert.dateAttended %>
          </div>
        </li>
    </a>
                     <div class="iconHold">
                            <form action="/concert/edit/<%= concert._id %>" method ="get"> 
                            <button type = "submit"> <img src="/edit.svg" width="20px" height="30px"></button></form>
                            

                        
                        

                            <button id="deleteConcrtModal" onclick="this.closest('.landmark').querySelector('.modal').style.display='inherit'"><img src ="/delete.svg" width="20px" height="30px"><br/></button> </div>


                        <!-- The Modal -->
                            <div id="myModal" class="modal">
                              <!-- Modal content -->
                                <div class="modal-content">
                                <span class="close" onclick="this.closest('.landmark').querySelector('.modal').style.display=''">&times;</span>
                                <p>Are you sure you want to delete <%= concert.name %>:<%= concert.tourName %> tour?</p>
                                <div><form style = "display: inline;" action="/concert/<%= concert._id %>?_method=DELETE" method ="post"> <input type="hidden" name="_method" value="DELETE"> 
                            <button type="submit">Yes</button> </form>
                        <button onclick="this.closest('.landmark').querySelector('.modal').style.display=''">No</button></div>
                                </div></div> 
                </div>

                
                <% } %>
        </ul>
    </div>
    </div>
</body>
</html>